# -*- coding: iso-8859-1 -*-
require File.dirname(__FILE__) + '/common'

class TestSimple < TestCase

  def test_all
    exprs = [[1],
             [1.1],

             [2, '&', 3],
             [2, '&', 3.1],
             [0, '&', 3],
             [0, '&', 3.1],
             [2, '&', 0],
             [0, '&', 0],

             [2, '|', 3],
             [2, '|', 3.1],
             [0, '|', 3],
             [0, '|', 3.1],
             [2, '|', 0],
             [0, '|', 0],

             [2, '+', 3],
             [2, '+', 3.1],
             [0, '+', 3],
             [0, '+', 3.1],
             [2, '+', 0],
             [0, '+', 0],

             [2, '-', 3],
             [2, '-', 3.1],
             [0, '-', 3],
             [0, '-', 3.1],
             [2, '-', 0],
             [0, '-', 0],

             [2, '*', 3],
             [2, '*', 3.1],
             [0, '*', 3],
             [0, '*', 3.1],
             [2, '*', 0],
             [0, '*', 0],

             [2, '/', 4],
             [2, '/', 4.2],
             [0, '/', 3],
             [0, '/', 3.1],
             [2, '/', 0],
             [0, '/', 0],

             [2, '+', 3,   '*', 4],
             [2, '+', 3.1, '*', 4],
             [0, '+', 3,   '*', 4],
             [0, '+', 3.1, '*', 4],
             [2, '+', 0,   '*', 4],
             [0, '+', 0,   '*', 4],

             [2, '-', 3,   '*', 4],
             [2, '-', 3.1, '*', 4],
             [0, '-', 3,   '*', 4],
             [0, '-', 3.1, '*', 4],
             [2, '-', 0,   '*', 4],
             [0, '-', 0,   '*', 4],

             [4, '+', 2, '*', 3],
             [4, '+', 2, '*', 3.1],
             [4, '+', 0, '*', 3],
             [4, '+', 0, '*', 3.1],
             [4, '+', 2, '*', 0],
             [4, '+', 0, '*', 0],

             [4, '+', 2, '/', 4],
             [4, '+', 2, '/', 4.2],
             [4, '+', 0, '/', 3],
             [4, '+', 0, '/', 3.1],
             [4, '+', 2, '/', 0],
             [4, '+', 0, '/', 0],

            ]

    wants = [1.0,
             1.1,
             2.0,2.0,  0,  0,  0,  0,
             2.0,2.0,3.0,3.1,2.0,0.0,
             5.0,5.1,3.0,3.1,2.0,0.0,
             -1.0,-1.1,-3.0,-3.1,2.0,0.0,
             6.0,6.2,0.0,0.0,0.0,0.0,
             0.5,0.476190476190476,0.0,0.0,'Infinity','NaN',
             14.0,14.4,12.0,12.4,2.0,0.0,
             -10.0,-10.4,-12.0,-12.4,2.0,0.0,
             10.0,10.2,4.0,4.0,4.0,4.0,
             4.5,4.47619047619048,4.0,4.0,'Infinity','NaN',
            ]

    (0..exprs.length-1).each do |i|
      e = exprs[i].map { |v| v.to_s }
      want = wants[i].to_s
      have = FExpr::Evaluator.new(e).eval
      assert_equal want, have
    end
    
  end
end
